"""
Реализовать программу для подсчёта индекса массы тела
человека. Пользователь вводит рост и вес с клавиатуры. На
выходе – ИМТ и пояснение к нему в зависимости от попадания
в тот или иной диапазон. Использовать обработку исключений
"""

def calculate_bmi():
    """
    Основная функция для расчёта индекса массы тела.

    Запрашивает у пользователя пол, вес и рост, автоматически преобразует рост в метры,
    выполняет расчёт ИМТ, определяет категорию массы тела с учетом пола и выводит результат.
    Обрабатывает возможные ошибки ввода данных.

    Исключения:
        ValueError: При вводе нечисловых значений или отрицательных чисел
        ZeroDivisionError: При попытке деления на ноль (рост = 0)
        Exception: Перехват любых других непредвиденных ошибок
    """
    try:
        print("\n" + "=" * 50)

        gender = input("Введите ваш пол (м/ж): ").strip().lower()
        if gender not in ['м', 'ж']:
            raise ValueError("Пол должен быть указан как 'м' (мужской) или 'ж' (женский)!")

        weight = float(input("Введите ваш вес в килограммах: "))
        if weight <= 0:
            raise ValueError("Вес должен быть положительным числом!")

        height_input = input("Введите ваш рост (в метрах или сантиметрах): ")
        height_value = float(height_input)

        if height_value > 3:
            height = height_value / 100
            print(f"  Преобразовано: {height_value} см = {height:.2f} м")
        elif height_value <= 0:
            raise ValueError("Рост должен быть положительным числом!")
        else:
            height = height_value

        bmi = weight / (height ** 2)

        if gender == 'м':
            if bmi < 18.5:
                category = "Недостаточная масса тела"
            elif 18.5 <= bmi < 25:
                category = "Норма"
            elif 25 <= bmi < 30:
                category = "Избыточная масса тела"
            elif 30 <= bmi < 35:
                category = "Ожирение I степени"
            elif 35 <= bmi < 40:
                category = "Ожирение II степени"
            else:
                category = "Ожирение III степени"
        else:
            if bmi < 17.5:
                category = "Недостаточная масса тела"
            elif 17.5 <= bmi < 23.5:
                category = "Норма"
            elif 23.5 <= bmi < 28.5:
                category = "Избыточная масса тела"
            elif 28.5 <= bmi < 33.5:
                category = "Ожирение I степени"
            elif 33.5 <= bmi < 38.5:
                category = "Ожирение II степени"
            else:
                category = "Ожирение III степени"

        print("\n" + "=" * 50)
        print(f"Пол: {'мужской' if gender == 'м' else 'женский'}")
        print(f"Вес: {weight} кг, Рост: {height:.2f} м")
        print(f"Ваш ИМТ: {bmi:.2f}")
        print(f"Категория: {category}")
        print("=" * 50)

        print("\nИнтерпретация показателей ИМТ:")
        if gender == 'м':
            print("Мужские нормы:")
            print("- < 18.5   : Недостаточная масса тела")
            print("- 18.5-25.0: Нормальная масса тела")
            print("- 25.0-30.0: Избыточная масса тела")
            print("- 30.0-35.0: Ожирение I степени")
            print("- 35.0-40.0: Ожирение II степени")
            print("- ≥ 40.0   : Ожирение III степени")
        else:
            print("Женские нормы:")
            print("- < 17.5   : Недостаточная масса тела")
            print("- 17.5-23.5: Нормальная масса тела")
            print("- 23.5-28.5: Избыточная масса тела")
            print("- 28.5-33.5: Ожирение I степени")
            print("- 33.5-38.5: Ожирение II степени")
            print("- ≥ 38.5   : Ожирение III степени")

    except ValueError as e:
        print("\nОшибка ввода:", e)
        print("Пожалуйста, вводите данные в правильном формате!")
    except ZeroDivisionError:
        print("\nОшибка: рост не может быть равен нулю!")
    except Exception as e:
        print("\nНепредвиденная ошибка:", e)


if __name__ == "__main__":
    print("=" * 50)
    print("КАЛЬКУЛЯТОР ИНДЕКСА МАССЫ ТЕЛА (ИМТ)")
    print("=" * 50)
    print("Примечание:")
    print("- Рост можно вводить как в метрах (1.79), так и в сантиметрах (179)")
    print("- Пол указывается как 'м' (мужской) или 'ж' (женский)")

    calculate_bmi()